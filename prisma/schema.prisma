datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client"            
  output   = "../src/generated/prisma"  
  moduleFormat = "cjs"
  
}
model User {
  id        Int      @id @default(autoincrement())
  name      String   
  email     String   @unique
  role      Role   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Role {
  INTERN
  EMPLOYEE
  MANAGER
}

model BookmarkUser {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  email     String   @unique
  hash      String

  firstName      String?   
  lastName       String?

  bookmarks Bookmark[]
  
  @@map("bookmark-users")
}



model Bookmark {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  title    String   
  desc     String?   
  link     String

  userId   Int
  user     BookmarkUser   @relation(fields: [userId], references: [id])

  @@map("bookmarks")
}
model JwtUser {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  email     String   @unique
  hash      String
  hashedRt  String?   

  @@map("jwt-users")
}

model TodoUser {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  email          String       @unique
  firstName      String  
  lastName       String

  todos Todo[]

  @@map("todo-users")
}

model Todo {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  title             String       @unique
  description       String?   
  status            TodoStatus   @default(OPEN)

  userId   Int
  user     TodoUser   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("todos")
}

enum TodoStatus {
  OPEN
  IN_PROGRESS
  DONE
}